import{u as F,a as w,_ as R}from"./CxZ-r3KF.js";import{u as z,b as D,a as P}from"./C1wZWsCb.js";import{q as j,m as K,g as N,k as d,ak as E,l as h,s as v}from"./DaL4rXlw.js";import{h as Q}from"./Xt-XnCFv.js";function U(e,s,m){return m<=s?s:Math.min(m,Math.max(s,e))}const W=j({name:"QRating",props:{...F,...z,modelValue:{type:Number,required:!0},max:{type:[String,Number],default:5},icon:[String,Array],iconHalf:[String,Array],iconSelected:[String,Array],iconAriaLabel:[String,Array],color:[String,Array],colorHalf:[String,Array],colorSelected:[String,Array],noReset:Boolean,noDimming:Boolean,readonly:Boolean,disable:Boolean},emits:["update:modelValue"],setup(e,{slots:s,emit:m}){const{proxy:{$q:A}}=K(),_=w(e),x=D(e),H=P(x),o=N(0);let u={};const y=d(()=>e.readonly!==!0&&e.disable!==!0),$=d(()=>`q-rating row inline items-center q-rating--${y.value===!0?"":"non-"}editable`+(e.noDimming===!0?" q-rating--no-dimming":"")+(e.disable===!0?" disabled":"")+(e.color!==void 0&&Array.isArray(e.color)===!1?` text-${e.color}`:"")),C=d(()=>{const t=Array.isArray(e.icon)===!0?e.icon.length:0,n=Array.isArray(e.iconSelected)===!0?e.iconSelected.length:0,l=Array.isArray(e.iconHalf)===!0?e.iconHalf.length:0,c=Array.isArray(e.color)===!0?e.color.length:0,i=Array.isArray(e.colorSelected)===!0?e.colorSelected.length:0,a=Array.isArray(e.colorHalf)===!0?e.colorHalf.length:0;return{iconLen:t,icon:t>0?e.icon[t-1]:e.icon,selIconLen:n,selIcon:n>0?e.iconSelected[n-1]:e.iconSelected,halfIconLen:l,halfIcon:l>0?e.iconHalf[n-1]:e.iconHalf,colorLen:c,color:c>0?e.color[c-1]:e.color,selColorLen:i,selColor:i>0?e.colorSelected[i-1]:e.colorSelected,halfColorLen:a,halfColor:a>0?e.colorHalf[a-1]:e.colorHalf}}),V=d(()=>{if(typeof e.iconAriaLabel=="string"){const t=e.iconAriaLabel.length!==0?`${e.iconAriaLabel} `:"";return n=>`${t}${n}`}if(Array.isArray(e.iconAriaLabel)===!0){const t=e.iconAriaLabel.length;if(t>0)return n=>e.iconAriaLabel[Math.min(n,t)-1]}return(t,n)=>`${n} ${t}`}),q=d(()=>{const t=[],n=C.value,l=Math.ceil(e.modelValue),c=y.value===!0?0:null,i=e.iconHalf===void 0||l===e.modelValue?-1:l;for(let a=1;a<=e.max;a++){const r=o.value===0&&e.modelValue>=a||o.value>0&&o.value>=a,f=i===a&&o.value<a,g=o.value>0&&(f===!0?l:e.modelValue)>=a&&o.value<a,I=f===!0?a<=n.halfColorLen?e.colorHalf[a-1]:n.halfColor:n.selColor!==void 0&&r===!0?a<=n.selColorLen?e.colorSelected[a-1]:n.selColor:a<=n.colorLen?e.color[a-1]:n.color,B=(f===!0?a<=n.halfIconLen?e.iconHalf[a-1]:n.halfIcon:n.selIcon!==void 0&&(r===!0||g===!0)?a<=n.selIconLen?e.iconSelected[a-1]:n.selIcon:a<=n.iconLen?e.icon[a-1]:n.icon)||A.iconSet.rating.icon;t.push({name:(f===!0?a<=n.halfIconLen?e.iconHalf[a-1]:n.halfIcon:n.selIcon!==void 0&&(r===!0||g===!0)?a<=n.selIconLen?e.iconSelected[a-1]:n.selIcon:a<=n.iconLen?e.icon[a-1]:n.icon)||A.iconSet.rating.icon,attrs:{tabindex:c,role:"radio","aria-checked":e.modelValue===a?"true":"false","aria-label":V.value(a,B)},iconClass:"q-rating__icon"+(r===!0||f===!0?" q-rating__icon--active":"")+(g===!0?" q-rating__icon--exselected":"")+(o.value===a?" q-rating__icon--hovered":"")+(I!==void 0?` text-${I}`:"")})}return t}),M=d(()=>{const t={role:"radiogroup"};return e.disable===!0&&(t["aria-disabled"]="true"),e.readonly===!0&&(t["aria-readonly"]="true"),t});function S(t){if(y.value===!0){const n=U(parseInt(t,10),1,parseInt(e.max,10)),l=e.noReset!==!0&&e.modelValue===n?0:n;l!==e.modelValue&&m("update:modelValue",l),o.value=0}}function b(t){y.value===!0&&(o.value=t)}function k(t,n){switch(t.keyCode){case 13:case 32:return S(n),v(t);case 37:case 40:return u[`rt${n-1}`]&&u[`rt${n-1}`].focus(),v(t);case 39:case 38:return u[`rt${n+1}`]&&u[`rt${n+1}`].focus(),v(t)}}function L(){o.value=0}return E(()=>{u={}}),()=>{const t=[];return q.value.forEach(({iconClass:n,name:l,attrs:c},i)=>{const a=i+1;t.push(h("div",{key:a,ref:r=>{u[`rt${a}`]=r},class:"q-rating__icon-container flex flex-center",...c,onClick(){S(a)},onMouseover(){b(a)},onMouseout:L,onFocus(){b(a)},onBlur:L,onKeyup(r){k(r,a)}},Q(s[`tip-${a}`],[h(R,{class:n,name:l})])))}),e.name!==void 0&&e.disable!==!0&&H(t,"push"),h("div",{class:$.value,style:_.value,...M.value},t)}}});export{W as _};
